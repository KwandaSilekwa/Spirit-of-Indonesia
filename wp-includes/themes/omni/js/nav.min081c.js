!function($){$(document).ready((function(){$(".primary-navbar-desktop").css("opacity",1);var listenInterval=1;function createResultHtml(data,destination=!1){var results=[];return data.forEach((function(result){var el=document.createElement("div");el.onclick=()=>window.location=result.link,el.classList="result";var left=document.createElement("span");left.classList="left",$(left).css("position","relative"),$(left).append("<img src='"+result.image+"'>"),result.featured&&$(left).append("<span class='message' style='font-size: 10px'><div class='featured'>Featured Journey</div></span>"),result.limited&&$(left).append("<span class='message' style='font-size: 10px'><div class='limited-edition'>Limited Edition</div></span>");var right=document.createElement("span");right.classList="right",$(right).append("<h4>"+result.title+"</h4>"),$(right).append(result.sub_title?"<h5>"+result.sub_title+"</h5>":""),$(right).append(result.date?"<h5>"+result.date+"</h5>":""),el.append(left),el.append(right),results.push(el)})),results}function oneTypeResultHTML(data,title){var result=document.createElement("div");$(result).css("width","100%");var resultHTML=createResultHtml(data);return $(result).append("<h3>"+title+"</h3>"),resultHTML.forEach((function(element){result.append(element)})),result}function twoTypeResultHTML(data,titles){var leftData,leftResultHTML=createResultHtml("Journeys"==titles[0]?data.journeys:"Blogs"==titles[0]?data.blogs:data.others),left=document.createElement("div");$(left).addClass("twoSearchResultCol"),$(left).append("<h3>"+titles[0]+"</h3>"),leftResultHTML.forEach((function(element){$(left).append(element)}));var rightData,rightResultHTML=createResultHtml("Journeys"==titles[1]?data.journeys:"Blogs"==titles[1]?data.blogs:data.others),right=document.createElement("div");return $(right).addClass("twoSearchResultCol"),$(right).addClass("twoSearchResultColRight"),$(right).append("<h3>"+titles[1]+"</h3>"),rightResultHTML.forEach((function(element){$(right).append(element)})),[left,right]}function threeTypeResultHTML(data,titles){var leftResultHTML=createResultHtml(data.journeys),left=document.createElement("div");$(left).addClass("threeSearchResultCol"),$(left).append("<h3>"+titles[0]+"</h3>"),leftResultHTML.forEach((function(element){$(left).append(element)}));var rightResultHTML=createResultHtml(data.blogs),right=document.createElement("div");$(right).addClass("threeSearchResultCol"),$(right).addClass("twoSearchResultColRight"),$(right).append("<h3>"+titles[1]+"</h3>"),rightResultHTML.forEach((function(element){$(right).append(element)}));var middleResultHTML=createResultHtml(data.others),middle=document.createElement("div");return $(middle).addClass("threeSearchResultCol"),$(middle).append("<h3>"+titles[2]+"</h3>"),middleResultHTML.forEach((function(element){$(middle).append(element)})),[left,right,middle]}function displayResultsHTML(data){return data.journeys.length>0&&data.blogs.length>0&&data.others.length>0?threeTypeResultHTML(data,["Journeys","Blogs","Destinations"]):data.journeys.length>0?data.blogs.length>0?twoTypeResultHTML(data,["Journeys","Blogs"]):data.others.length>0?twoTypeResultHTML(data,["Journeys","Destinations"]):oneTypeResultHTML(data.journeys,"Journeys"):data.blogs.length>0?data.others.length>0?twoTypeResultHTML(data,["Blogs","Destinations"]):oneTypeResultHTML(data.blogs,"Blogs"):data.others.length>0?oneTypeResultHTML(data.others,"Destinations"):"<h4>Sorry, no results found! <a href='/create-our-own-experience'>Click here</a> to customize your own journey experience</h4>"}function toggleUserSearch(){$(".omni-primary-head").toggleClass("aiv-alt-z-index"),$("#aiv-nav-searchContainer").slideToggle(),$("#overlay").toggle(),clearUserSearch()}function typingUserSearch(){var userInput=$(this).val();userInput.length>2&&runUserSearch(),userInput.length>0&&$("#clearSearchBtn").show(),0===userInput.length&&clearUserSearch()}function clearUserSearch(){$("#clearSearchBtn").hide(),$("#aiv-nav-searchBar").val(""),$("#searchResult").hide()}function runUserSearch(){$("#input-container-icon").find("i").toggle(),$("#input-container-icon").find("div").toggle();var userInput=""+$("#aiv-nav-searchBar").val(),qstr="searchQuery="+userInput+"&action=getUserSearchQuery";qstr.replace(/\s/g,""),$.ajax({type:"POST",dataType:"json",url:omni_ajax_script.ajaxurl,data:qstr,success:function(data){var destinations;$.ajax({url:"https://aivteam.com/api/destusersearch/"+userInput,dataType:"json",type:"GET",crossDomain:!0,async:!1,contentType:"application/json",processData:!1,success:function(data){destinations=data}}),data.others=destinations,$("#input-container-icon").find("i").toggle(),$("#input-container-icon").find("div").toggle(),$("#displayUserSearchResults").html(displayResultsHTML(data)),$("#searchResult").show()},error:function(jqXHR,textStatus,errorThrown){$("#input-container-icon").find("i").toggle(),$("#input-container-icon").find("div").toggle(),console.log(errorThrown),console.log(textStatus),console.log(jqXHR)}})}$(document).on("keyup","textarea,input",(function(e){e.preventDefault();var ele=this;$(ele).data("textChangeTime",Date.now()),setTimeout((function(){var lastTextChangeTime=$(ele).data("textChangeTime"),currentTextChangeTime,timeSinceLastChange;Date.now()-lastTextChangeTime>1e3&&$(ele).trigger({type:"textChange"})}),1e3)})),$.fn.textChange=function(eventHandler){if("function"==typeof eventHandler)return $(this).each((function(){$(this).on("textChange",eventHandler)}))},$(this).find("#primary-menu").append('<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15690 bold aiv-get-started" ><a href="https://artinvoyage.com/create-our-own-experience" ><span >GET STARTED</span></a></li>'),$("#aiv-nav-searchBtn").click(toggleUserSearch),$("#overlay").click(toggleUserSearch),$("#clearSearchBtn").click(toggleUserSearch),$("#aiv-nav-searchBar").textChange(typingUserSearch),$("#userSearch-form").submit((function(e){return!1})),$(".primary-navbar-responsive").each((function(){$(this).find("#primary-menu").append('<li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-15690" ><a href="https://artinvoyage.com/subscribe-to-our-newsletter" ><span>SUBSCRIBE</span></a></li>')}));var submenuWidth=$("nav").data("submenuwidth");function checkScreenWidth(){var screenWidth;return $(window).width()}function initMenu(){$(".nav-menu.desktop li.drop-down.menu-item-has-children").each((function(){$(this).on("mouseenter",(function(){var li_position=$(this).position(),li_height=$(this).height(),li_width=$(this).innerWidth(),li_pos_y=li_position.bottom,li_pos_x=li_position.left,li_right_x=li_pos_x+(li_width-submenuWidth),navwidth=$(".primary-nav").width(),remainder;checkScreenWidth()-li_pos_x>submenuWidth?$(this).children(".sub-menu").css({left:li_pos_x+"px",top:li_pos_y+"px",width:submenuWidth}).fadeIn("fast"):$(this).children(".sub-menu").css({left:li_right_x+"px",top:li_pos_y+"px",width:submenuWidth}).fadeIn("fast")})),$(this).on("mouseleave",(function(){var thisWidth=checkScreenWidth();$(this).children(".sub-menu").fadeOut("fast")}))})),$(".nav-menu.desktop  li:not(.mega-menu), .nav-menu.desktop li:not(.mega-menu)").children(" .sub-menu").find(".menu-item-has-children").each((function(){$(this).on("mouseenter",(function(){var li_offset=$(this).offset(),li_position=$(this).position(),li_width=$(this).innerWidth(),li_pos_y=li_position.top,li_pos_x=li_offset.left,li_right_x=li_position.left-submenuWidth,navwidth=$(".primary-nav").width(),remainder;$(window).width()-(li_pos_x+submenuWidth)>submenuWidth?$(this).children(".sub-menu").css({left:li_width+"px",top:li_pos_y+"px",width:submenuWidth}).fadeIn("fast"):$(this).children(".sub-menu").css({left:li_right_x+"px",top:li_pos_y+"px",width:submenuWidth}).fadeIn("fast")})),$(this).on("mouseleave",(function(){$(this).children(".sub-menu").fadeOut("fast")}))})),$(".nav-menu.desktop li.mega-menu.menu-item-has-children").each((function(){$(this).on("mouseenter",(function(){var li_offset=$(this).offset(),header_offset=$("header .omni-grid").offset(),logoWidth=$(".logo-box").outerWidth(!0),li_position=$(this).position(),li_height=$(this).innerHeight(),menu_pos_y=li_position.top+li_height,menu_width=$(".omni-primary-head .omni-grid").width(),menu_pos_x=li_position.left-(header_offset.left-li_offset.left);$(this).children(".sub-menu").css({top:menu_pos_y+"px"}).fadeIn("fast")})),$(this).on("mouseleave",(function(){$(this).children(".sub-menu").css({}).fadeOut("fast")}))}))}function adjustPageMenu(){var thistop=$("header").innerHeight(),adminbar=$(" #wpadminbar").innerHeight();$(".desktop .omni-page-menu").css("top",thistop+adminbar+"px")}initMenu(),adjustPageMenu(),$((function(){var resizeEnd;$(window).on("resize",(function(){clearTimeout(resizeEnd),resizeEnd=setTimeout((function(){$(window).trigger("resize-end")}),50)}))})),$(window).on("resize-end",(function(){initMenu(),adjustPageMenu()})),$(window).scroll((function(event){var scroll=$(window).scrollTop(),omniHero=$(".omni-hero").height();scroll>omniHero/2?0==$(".omni-primary-head").hasClass("sticky")&&($(".omni-primary-head").toggleClass("sticky"),$(".omni-primary-head").css("opacity",1),$(".omni-primary-head .omni-grid").css("opacity",1),$(".omni-primary-head").addClass("box-shadow"),$(".omni-primary-head").removeClass("gray-bg"),$(".omni-primary-head").removeClass("aiv-nav-mobile-blue"),$(".top-bar").addClass("hide-me"),$(".currencySelectMobile").addClass("currencySelectColorInvert"),$(".connect-footer").removeClass("display-none"),$(".inner-num").addClass("crimson-red"),$(".inner-num").removeClass("white"),$(".header-logo").removeClass("white-logo")):1==$(".omni-primary-head").hasClass("sticky")&&($(".omni-primary-head").removeClass("box-shadow").toggleClass("sticky"),$(".omni-primary-head").addClass("gray-bg"),$(".omni-primary-head").addClass("aiv-nav-mobile-blue"),$(".currencySelectMobile").removeClass("currencySelectColorInvert"),$(".top-bar").removeClass("hide-me"),$(".connect-footer").addClass("display-none"),$(".inner-num").removeClass("crimson-red"),$(".inner-num").addClass("white"),$(".header-logo").addClass("white-logo"));var screenWidth=checkScreenWidth(),scroll;(console.log(screenWidth),screenWidth<=768)&&((scroll=$(window).scrollTop())>omniHero/2?$(".mobile-module").fadeIn():$(".mobile-module").fadeOut())}))})),$(document).click((function(e){var container=$("#aiv-nav-searchContainer"),btn;$("#aiv-searchbtn-Icon").is(e.target)||container.is(e.target)||0!==container.has(e.target).length||"none"!=$("#aiv-nav-searchContainer").css("display")&&container.slideUp()}))}(jQuery);